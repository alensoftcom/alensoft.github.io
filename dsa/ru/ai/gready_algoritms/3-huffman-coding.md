# Задача о кодировании Хаффмана (Huffman Coding)

## Введение

Huffman Coding представляет собой алгоритм сжатия данных без потерь, основанный на жадном подходе. Он используется для
построения оптимального префиксного кода, который позволяет сократить среднюю длину кодовых слов, используя более
короткие коды для более частотных символов.

## Базовые принципы Huffman Coding

1. **Вычисление частоты символов**: Для каждого символа в данных вычисляется его частота или вероятность появления.
2. **Создание мин-кучи (priority queue)**: На основе этих частот создается мин-куча, где каждый узел представляет символ
   и его частоту.
3. **Построение дерева Хаффмана**:
    - Повторять следующие шаги, пока в куче более одного узла:
        - Извлечь два узла с наименьшей частотой.
        - Создать новый внутренний узел с дочерними узлами, равными сумме частот двух извлеченных узлов.
        - Вставить новый узел обратно в кучу.
    - Оставшийся узел в куче является корнем дерева Хаффмана.
4. **Генерация кодов**: Пройти по дереву Хаффмана, присваивая '0' для левого ребра и '1' для правого ребра, таким
   образом сформировать коды для каждого символа.

## Пример построения дерева Хаффмана

Рассмотрим следующие символы и их частоты:

- A: 45
- B: 13
- C: 12
- D: 16
- E: 9
- F: 5

### Шаги построения дерева:

1. Создать мин-кучу с узлами: A(45), B(13), C(12), D(16), E(9), F(5).
2. Извлечь F(5) и E(9), создать новый узел с частотой 14 (5+9), вставить его в кучу.
3. Извлечь C(12) и новый узел(14), создать узел с частотой 26 (12+14), вставить в кучу.
4. Извлечь B(13) и D(16), создать узел с частотой 29 (13+16), вставить в кучу.
5. Извлечь новый узел(26) и новый узел(29), создать узел с частотой 55 (26+29), вставить в кучу.
6. Извлечь A(45) и новый узел(55), создать корневой узел с частотой 100 (45+55).

### Коды символов:

- A: 0
- B: 100
- C: 101
- D: 110
- E: 1110
- F: 1111

## Вычислительная сложность

Построение мин-кучи занимает $O(n log n)$, где $n$ - количество уникальных символов. Построение дерева Хаффмана также
занимает $O(n log n)$, поэтому общая временная сложность алгоритма составляет $O(n log n)$.

## Реализация на Java и Python

### Java

```java
import java.util.PriorityQueue;

class HuffmanNode implements Comparable<HuffmanNode> {
    char character;
    int frequency;
    HuffmanNode left, right;

    public HuffmanNode(char character, int frequency) {
        this.character = character;
        this.frequency = frequency;
        this.left = null;
        this.right = null;
    }

    @Override
    public int compareTo(HuffmanNode other) {
        return this.frequency - other.frequency;
    }
}

public class HuffmanCoding {
    // Кодирование и построение дерева
}
```

### Python

```python
import heapq


class HuffmanNode:
    def __init__(self, char, freq):
        self.char = char
        self.freq = freq
        self.left = None
        self.right = None

    def __lt__(self, other):
        return self.freq < other.freq


def huffman_coding(freq_dict):
    heap = [HuffmanNode(char, freq) for char, freq in freq_dict.items()]
    heapq.heapify(heap)
    # Построение дерева
```

## Графическое представление дерева Хаффмана

```
        100
       /    \
     45      55
            /   \
          26     29
         /  \    / \
       12   14 13  16
           / \
          5   9
```

## Оптимальность Huffman Coding

Huffman Coding обеспечивает оптимальное сжатие данных, так как использует минимальную возможную среднюю длину кода для
заданного распределения частот символов.

## Применения Huffman Coding

Кодирование Хаффмана широко применяется при сжатии данных, в том числе при сжатии фото- и видеоизображений (JPEG, MPEG),
в популярных архиваторах (PKZIP, LZH и др.), в протоколах передачи данных HTTP (Deflate), MNP5 и MNP7 и других.

## Модификации

В 2013 году была предложена модификация алгоритма Хаффмана, позволяющая кодировать символы дробным количеством бит —
ANS. На базе данной модификации реализованы алгоритмы сжатия Zstandard (Zstd, Facebook, 2015—2016) и LZFSE (Apple, OS
X 10.11, iOS 9, 2016).

## Заключение

Huffman Coding является мощным инструментом для сжатия данных без потерь, основанном на жадном алгоритме. Его
эффективность и оптимальность делают его незаменимым в различных приложениях, связанных с обработкой и передачей данных.